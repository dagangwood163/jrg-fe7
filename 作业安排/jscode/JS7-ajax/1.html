<!doctype html>
<html>
<head>
    <title>封装一个ajax</title>
</head>
<body>
		
	<input id="username" type="text" placeholder="username">
	<input id="type" type="text" placeholder="get or post">
	<button id="btn">获取信息</button>

	<dl id="ct">

	</dl>

    <script src="util-ajax.js"></script>
	<script type="text/javascript">


        document.getElementById("btn").addEventListener('click', function(){
         
         	ajax({
				url: '1.php',
				type: document.getElementById('type').value,
				data: {
					username: document.getElementById('username').value
				},
				success: function(data){
					dealWith(data);
				},
				error: function(){
					onError();
				}
			});
        });

        function onError(){
        	document.getElementById('ct').innerHTML = 'oh  出错了...';
        }

       function dealWith (userInfo){
            var str = '<dt>性别：</dt>';
            str +=    '<dd>'+userInfo.sex+'</dd>';
            str +=    '<dt>年纪：</dt>';
            str +=    '<dd>'+userInfo.age+'</dd>';

            document.getElementById('ct').innerHTML = str;
       }

	</script>
	</body>
</html>